{"ast":null,"code":"var _jsxFileName = \"/Users/codex/Desktop/bootcamp/Bootcamp_coding/HoneyDoo/client/src/components/NavBar.js\";\nimport React, { useState, useEffect } from 'react';\nimport { Redirect, NavLink, useLocation } from \"react-router-dom\";\nimport { useStoreContext } from \"../utils/GlobalStore\";\nimport fetchJSON from '../utils/API';\nlet timeout;\n\nfunction NavBar() {\n  const [{\n    authOk,\n    name\n  }, dispatch] = useStoreContext();\n  const [showMenu, setShowMenu] = useState(false);\n  const location = useLocation();\n\n  async function loadUserSession() {\n    const {\n      status,\n      userData,\n      message\n    } = await fetchJSON(`/api/users/session`);\n    console.log(`[NavBar] attempted to reload session, result(${status}) message(${message})`);\n\n    if (!status) {\n      // clear any session\n      dispatch({\n        type: 'USER_LOGOUT',\n        message\n      });\n      return;\n    }\n\n    dispatch({\n      type: 'USER_LOGIN',\n      data: userData\n    });\n  }\n\n  useEffect(function () {\n    if (showMenu) {\n      if (timeout) clearTimeout(timeout);\n      timeout = setTimeout(function () {\n        setShowMenu(false);\n      }, 2000);\n    }\n  }, [showMenu]); // location changed so hide menu\n\n  useEffect(function () {\n    if (timeout) clearTimeout(timeout);\n    setShowMenu(false);\n  }, [location]);\n  useEffect(function () {\n    // on load let's get try to get the  session (if one exists)\n    if (localStorage.session && !authOk) {\n      loadUserSession();\n    }\n  }, []);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, localStorage.session && /*#__PURE__*/React.createElement(\"nav\", {\n    class: \"navbar navbar-expand-lg navbar-light bg-light\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 10\n    }\n  }, /*#__PURE__*/React.createElement(NavLink, {\n    to: \"/\",\n    className: \"navbar-brand\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: \"https://upload.wikimedia.org/wikipedia/commons/7/79/Mountain_icon_%28Noun_Project%29.svg\",\n    alt: \"\",\n    width: \"64\",\n    height: \"64\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => setShowMenu(!showMenu),\n    class: \"navbar-toggler\",\n    type: \"button\",\n    \"data-toggle\": \"collapse\",\n    \"data-target\": \"#navbar\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    class: \"navbar-toggler-icon\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: `collapse navbar-collapse ` + (showMenu ? 'show' : ''),\n    id: \"navbar\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    class: \"navbar-nav me-auto mb-2 mb-lg-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    className: \"nav-item\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(NavLink, {\n    to: \"/tasks\",\n    className: \"nav-link\",\n    activeClassName: \"active\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 17\n    }\n  }, \"Tasks\")), /*#__PURE__*/React.createElement(\"li\", {\n    className: \"nav-item\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(NavLink, {\n    to: \"/logout\",\n    className: \"nav-link\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 17\n    }\n  }, \"Logout\"))), name && /*#__PURE__*/React.createElement(\"div\", {\n    class: \"d-flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"mx-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 43\n    }\n  }, \"Welcome back \", /*#__PURE__*/React.createElement(\"u\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 74\n    }\n  }, name))))));\n}\n\nexport default NavBar;","map":{"version":3,"sources":["/Users/codex/Desktop/bootcamp/Bootcamp_coding/HoneyDoo/client/src/components/NavBar.js"],"names":["React","useState","useEffect","Redirect","NavLink","useLocation","useStoreContext","fetchJSON","timeout","NavBar","authOk","name","dispatch","showMenu","setShowMenu","location","loadUserSession","status","userData","message","console","log","type","data","clearTimeout","setTimeout","localStorage","session"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { Redirect, NavLink, useLocation  } from \"react-router-dom\"\nimport { useStoreContext } from \"../utils/GlobalStore\"\nimport fetchJSON from '../utils/API'\n\nlet timeout\n\nfunction NavBar() {\n  const [{ authOk, name }, dispatch ]= useStoreContext()\n  const [ showMenu, setShowMenu ] = useState( false )\n  const location = useLocation()\n\n  async function loadUserSession(){\n    const { status, userData, message }= await fetchJSON( `/api/users/session` )\n    console.log( `[NavBar] attempted to reload session, result(${status}) message(${message})` )\n    if( !status ){\n      // clear any session\n      dispatch({ type: 'USER_LOGOUT', message })\n      return\n    }\n    dispatch({ type: 'USER_LOGIN', data: userData })\n  }\n\n  useEffect( function(){\n    if( showMenu ){\n      if( timeout ) clearTimeout( timeout )\n      timeout = setTimeout( function(){ setShowMenu( false ); }, 2000 )\n    }\n  }, [ showMenu ])\n\n  // location changed so hide menu\n  useEffect( function(){\n    if( timeout ) clearTimeout( timeout )\n    setShowMenu( false )\n  }, [ location ])\n  \n  useEffect( function(){\n    // on load let's get try to get the  session (if one exists)\n    if( localStorage.session && !authOk ){\n      loadUserSession()\n    }\n  }, [] )\n\n  return ( \n    <>\n      { localStorage.session && \n         <nav class=\"navbar navbar-expand-lg navbar-light bg-light\">\n          <NavLink to=\"/\" className=\"navbar-brand\">\n              <img src='https://upload.wikimedia.org/wikipedia/commons/7/79/Mountain_icon_%28Noun_Project%29.svg' alt=\"\" width=\"64\" height=\"64\" />\n          </NavLink>\n          <button onClick={() => setShowMenu(!showMenu)} class=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\" data-target=\"#navbar\">\n            <span class=\"navbar-toggler-icon\"></span>\n          </button>\n\n          <div className={`collapse navbar-collapse `+(showMenu ? 'show' : '')} id=\"navbar\">\n            <ul class=\"navbar-nav me-auto mb-2 mb-lg-0\">\n              <li className=\"nav-item\">\n                <NavLink to=\"/tasks\" className=\"nav-link\" activeClassName=\"active\">Tasks</NavLink>\n              </li>          \n              <li className=\"nav-item\">\n                <NavLink to=\"/logout\" className=\"nav-link\">Logout</NavLink>\n              </li> \n            </ul>\n            { name && <div class=\"d-flex\"><div class=\"mx-3\">Welcome back <u>{name}</u></div></div> }\n          </div>\n        </nav>\n      }\n    </>\n  )\n}\n\nexport default NavBar"]},"metadata":{},"sourceType":"module"}