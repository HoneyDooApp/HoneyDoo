{"ast":null,"code":"var _jsxFileName = \"/Users/codex/Desktop/bootcamp/Bootcamp_coding/HoneyDoo/client/src/pages/Register.js\";\nimport React, { useRef, useEffect } from \"react\";\nimport { Redirect, Link } from 'react-router-dom';\nimport { useStoreContext } from \"../utils/GlobalStore\";\nimport fetchJSON from \"../utils/API\";\n\nfunction Register() {\n  const [{\n    authOk\n  }, dispatch] = useStoreContext();\n  const inputEmail = useRef();\n  const inputPassword = useRef();\n  const inputName = useRef();\n  const refForm = useRef();\n\n  async function registerUser(e) {\n    e.preventDefault(); // leverage browser built in + bootstrap features for form validation\n\n    if (!refForm.current.checkValidity()) {\n      refForm.current.classList.add('was-validated');\n      return;\n    }\n\n    const regData = {\n      name: inputName.current.value.trim(),\n      email: inputEmail.current.value.trim(),\n      password: inputPassword.current.value.trim()\n    }; // just to make sure the browser validation worked, we double-check\n\n    if (regData.name.length < 2 || regData.email.indexOf('@') < 2 || regData.password.length < 5) {\n      inputName.current.focus();\n      dispatch({\n        type: 'ALERT_MESSAGE',\n        message: \"Something is wrong with your form\"\n      });\n      return;\n    }\n\n    const {\n      status,\n      session,\n      userData,\n      message\n    } = await fetchJSON('/api/users/register', 'post', regData);\n\n    if (!status) {\n      // clear any session\n      localStorage.session = '';\n      dispatch({\n        type: 'ALERT_MESSAGE',\n        message\n      });\n      return;\n    } // notify user message; set user session/data\n\n\n    localStorage.session = session;\n    dispatch({\n      type: 'USER_LOGIN',\n      data: userData,\n      message\n    });\n  }\n\n  useEffect(function () {\n    // if remembered email, insert\n    inputEmail.current.value = localStorage.email || '';\n  }, []);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, authOk ? /*#__PURE__*/React.createElement(Redirect, {\n    to: \"/tasks\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 24\n    }\n  }) : '', /*#__PURE__*/React.createElement(\"form\", {\n    ref: refForm,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"card mt-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"card-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 21\n    }\n  }, \"User Registration\")), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"card-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    for: \"name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 25\n    }\n  }, \"First Name\"), /*#__PURE__*/React.createElement(\"input\", {\n    ref: inputName,\n    type: \"text\",\n    id: \"name\",\n    class: \"form-control\",\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"invalid-feedback\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 25\n    }\n  }, \"Please enter a name\")), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    for: \"email\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 25\n    }\n  }, \"Email Address\"), /*#__PURE__*/React.createElement(\"input\", {\n    ref: inputEmail,\n    id: \"email\",\n    type: \"email\",\n    class: \"form-control\",\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"invalid-feedback\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 25\n    }\n  }, \"Please enter an email\")), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    for: \"userPassword\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 25\n    }\n  }, \"Password\"), /*#__PURE__*/React.createElement(\"input\", {\n    ref: inputPassword,\n    id: \"userPassword\",\n    type: \"password\",\n    class: \"form-control\",\n    pattern: \".{8,}\",\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"invalid-feedback\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 25\n    }\n  }, \"Please enter a password (8 chars min)\"))), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"card-footer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: registerUser,\n    class: \"btn btn-primary mx-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 21\n    }\n  }, \"Register\"), /*#__PURE__*/React.createElement(Link, {\n    to: \"/login\",\n    class: \"font-weight-light text-muted mx-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 21\n    }\n  }, \"Already Registered?\")))));\n}\n\nexport default Register;","map":{"version":3,"sources":["/Users/codex/Desktop/bootcamp/Bootcamp_coding/HoneyDoo/client/src/pages/Register.js"],"names":["React","useRef","useEffect","Redirect","Link","useStoreContext","fetchJSON","Register","authOk","dispatch","inputEmail","inputPassword","inputName","refForm","registerUser","e","preventDefault","current","checkValidity","classList","add","regData","name","value","trim","email","password","length","indexOf","focus","type","message","status","session","userData","localStorage","data"],"mappings":"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","sourcesContent":["import React, { useRef, useEffect } from \"react\"\nimport { Redirect, Link } from 'react-router-dom'\nimport { useStoreContext } from \"../utils/GlobalStore\"\nimport fetchJSON from \"../utils/API\"\n\nfunction Register(){\n    const [{ authOk }, dispatch ] = useStoreContext()\n\n    const inputEmail = useRef()\n    const inputPassword = useRef()\n    const inputName = useRef()\n    const refForm = useRef()\n\n    async function registerUser( e ){\n        e.preventDefault()\n        \n        // leverage browser built in + bootstrap features for form validation\n        if( !refForm.current.checkValidity() ){            \n            refForm.current.classList.add('was-validated')\n            return\n        }\n\n        const regData = {\n            name: inputName.current.value.trim(),\n            email: inputEmail.current.value.trim(),\n            password: inputPassword.current.value.trim()\n        }\n\n        // just to make sure the browser validation worked, we double-check\n        if( regData.name.length<2 || regData.email.indexOf('@')<2 || regData.password.length<5 ){\n            inputName.current.focus()\n            dispatch({ type: 'ALERT_MESSAGE', message: \"Something is wrong with your form\" })\n            return\n        }\n\n        const { status, session, userData, message }= await fetchJSON( '/api/users/register', 'post', regData )\n        if( !status ){\n            // clear any session\n            localStorage.session = ''\n            dispatch({ type: 'ALERT_MESSAGE', message })\n            return\n        }\n\n        // notify user message; set user session/data\n        localStorage.session = session\n        dispatch({ type: 'USER_LOGIN', data: userData, message })\n    }\n\n    useEffect( function(){\n        // if remembered email, insert\n        inputEmail.current.value = localStorage.email || ''\n    }, [] )\n\n    return (\n        <>\n            { authOk ? <Redirect to='/tasks' /> : '' }\n            <form ref={refForm}>\n            <div class=\"card mt-5\">\n                <div class=\"card-header\">\n                    <h1>User Registration</h1>\n                </div>\n                <div class=\"card-body\">\n                    <div class=\"mb-3\">\n                        <label for=\"name\">First Name</label>\n                        <input ref={inputName} type=\"text\" id=\"name\" class=\"form-control\" required />\n                        <div class=\"invalid-feedback\">\n                            Please enter a name\n                        </div>\n                    </div>\n                    <div class=\"mb-3\">\n                        <label for=\"email\">Email Address</label>\n                        <input ref={inputEmail} id=\"email\" type=\"email\" class=\"form-control\" required />\n                        <div class=\"invalid-feedback\">\n                            Please enter an email\n                        </div>\n\n                    </div>\n                    <div class=\"mb-3\">\n                        <label for=\"userPassword\">Password</label>\n                        <input ref={inputPassword} id=\"userPassword\" type=\"password\" class=\"form-control\"  pattern=\".{8,}\" required />\n                        <div class=\"invalid-feedback\">\n                            Please enter a password (8 chars min)\n                        </div>\n                    </div>\n                </div>\n                <div class=\"card-footer\">\n                    <button onClick={registerUser} class=\"btn btn-primary mx-1\" >Register</button>\n                    <Link to=\"/login\" class=\"font-weight-light text-muted mx-3\">Already Registered?</Link>\n                </div>\n            </div>\n            </form>\n        </>\n    )\n}\n\nexport default Register"]},"metadata":{},"sourceType":"module"}